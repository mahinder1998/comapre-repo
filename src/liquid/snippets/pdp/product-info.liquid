<div class="pdp__content">

    <div class="pdp_share_main">   
    <div class="hm-wraper">

            {% assign show_tag = true %}
            
                {% if show_tag %}
                    {% if product.tags contains '10% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">10% OFF</div> 
                    {% assign show_tag = false %}
                    {% endif %}
                {% endif %}

                {% if show_tag %}
                    {% if product.tags contains '15% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">15% OFF</div> 
                        {% assign show_tag = false %}
                    {% endif %} 
                {% endif %}

                {% if show_tag %}
                    {% if product.tags contains '20% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">20% OFF</div> 
                        {% assign show_tag = false %}
                    {% endif %} 
                {% endif %}

                {% if show_tag %}
                    {% if product.tags contains '25% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">25% OFF</div> 
                    {% endif %} 
                {% endif %}

                {% if show_tag %}
                    {% if product.tags contains '30% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">30% OFF</div> 
                        {% assign show_tag = false %}
                    {% endif %} 
                {% endif %} 

                {% if show_tag %}
                    {% if product.tags contains '35% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">35% OFF</div> 
                    {% endif %} 
                {% endif %}

                {% if show_tag %}
                    {% if product.tags contains '40% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">40% OFF</div> 
                        {% assign show_tag = false %}
                    {% endif %}
                {% endif %} 

                {% if show_tag %}
                    {% if product.tags contains '45% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">45% OFF</div> 
                        {% assign show_tag = false %}
                    {% endif %} 
                {% endif %}

                {% if show_tag %}
                    {% if product.tags contains '50% OFF' %}
                        <div class="product-tag home-desk_tp SALE percentage">50% OFF</div> 
                        {% assign show_tag = false %}
                    {% endif %} 
                {% endif %}

            {% if show_tag %}
                {% if product.tags contains 'PRIVATE SALE' %}
                    <div class="product-tag home-desk_tp SALE">PRIVATE SALE</div>
                {% assign show_tag = false %}
                {% endif %}
            {% endif %}

            {% if show_tag %}
                {% if product.tags contains '300ml for 111AED' %}
                    <div class="product-tag home-desk_tp tag_bg_color">300ml for 111AED</div>
                {% assign show_tag = false %}
                {% endif %}
            {% endif %}

             {% if show_tag %}
            {% if product.tags contains 'sale' %}
            <div class="product-tag home-desk_tp colored_sale">sale</div>
                {% assign show_tag = false %}
            {%endif%}
                {%endif%}

            {% if show_tag %}
                {% if product.tags contains 'exclusively_online' %}
                    <div class="product-tag home-desk_tp">Exclusively Online</div>
                    {% assign show_tag = false %}
                {%endif%}
            {%endif%} 

            {% if show_tag %}
                {% if product.tags contains 'Limited Edition' %}
                    <div class="product-tag home-desk_tp">Limited Edition</div>
                    {% assign show_tag = false %}
                {%endif%}
            {%endif%}   
            
            {% if show_tag %}
                {% if product.tags contains 'new' %}
                    <div class="product-tag home-desk_tp">New</div>
                {% assign show_tag = false %}
                {% endif %}
            {% endif %}
            
            {% if show_tag %}
            {% if product.tags contains 'best-seller' %}
            <div class="product-tag home-desk_tp">Best seller</div>
            {% assign show_tag = false %}
            {%endif%}
            {% endif %}
            
            
            
           
       
        </div>

        <div class="pdp-share-options">
            <div class="social-icons-list">
                {%- assign share_url = shop.url | append: product.url -%}
                <a href="https://api.whatsapp.com/send?text={{ share_url }}" target="_blank">
                    <img src="https://cdn.shopify.com/s/files/1/0612/2202/7520/files/share_WHATSAPP_01.svg?v=1638441052"></a>
                <a href="https://www.instagram.com/moltonbrown/?hl=en" target="_blank"> 
                    <svg xmlns="http://www.w3.org/2000/svg" width="102" height="102" viewBox="0 0 102 102"><defs><radialGradient id="a" cx="6.601" cy="99.766" r="129.502" gradientUnits="userSpaceOnUse"><stop offset=".09" stop-color="#fa8f21"/><stop offset=".78" stop-color="#d82d7e"/></radialGradient><radialGradient id="b" cx="70.652" cy="96.49" r="113.963" gradientUnits="userSpaceOnUse"><stop offset=".64" stop-color="#8c3aaa" stop-opacity="0"/><stop offset="1" stop-color="#8c3aaa"/></radialGradient></defs><path fill="url(#a)" d="M25.865,101.639A34.341,34.341,0,0,1,14.312,99.5a19.329,19.329,0,0,1-7.154-4.653A19.181,19.181,0,0,1,2.5,87.694,34.341,34.341,0,0,1,.364,76.142C.061,69.584,0,67.617,0,51s.067-18.577.361-25.14A34.534,34.534,0,0,1,2.5,14.312,19.4,19.4,0,0,1,7.154,7.154,19.206,19.206,0,0,1,14.309,2.5,34.341,34.341,0,0,1,25.862.361C32.422.061,34.392,0,51,0s18.577.067,25.14.361A34.534,34.534,0,0,1,87.691,2.5a19.254,19.254,0,0,1,7.154,4.653A19.267,19.267,0,0,1,99.5,14.309a34.341,34.341,0,0,1,2.14,11.553c.3,6.563.361,8.528.361,25.14s-.061,18.577-.361,25.14A34.5,34.5,0,0,1,99.5,87.694,20.6,20.6,0,0,1,87.691,99.5a34.342,34.342,0,0,1-11.553,2.14c-6.557.3-8.528.361-25.14.361s-18.577-.058-25.134-.361" data-name="Path 16"/><path fill="url(#b)" d="M25.865,101.639A34.341,34.341,0,0,1,14.312,99.5a19.329,19.329,0,0,1-7.154-4.653A19.181,19.181,0,0,1,2.5,87.694,34.341,34.341,0,0,1,.364,76.142C.061,69.584,0,67.617,0,51s.067-18.577.361-25.14A34.534,34.534,0,0,1,2.5,14.312,19.4,19.4,0,0,1,7.154,7.154,19.206,19.206,0,0,1,14.309,2.5,34.341,34.341,0,0,1,25.862.361C32.422.061,34.392,0,51,0s18.577.067,25.14.361A34.534,34.534,0,0,1,87.691,2.5a19.254,19.254,0,0,1,7.154,4.653A19.267,19.267,0,0,1,99.5,14.309a34.341,34.341,0,0,1,2.14,11.553c.3,6.563.361,8.528.361,25.14s-.061,18.577-.361,25.14A34.5,34.5,0,0,1,99.5,87.694,20.6,20.6,0,0,1,87.691,99.5a34.342,34.342,0,0,1-11.553,2.14c-6.557.3-8.528.361-25.14.361s-18.577-.058-25.134-.361" data-name="Path 17"/><path fill="#fff" d="M461.114,477.413a12.631,12.631,0,1,1,12.629,12.632,12.631,12.631,0,0,1-12.629-12.632m-6.829,0a19.458,19.458,0,1,0,19.458-19.458,19.457,19.457,0,0,0-19.458,19.458m35.139-20.229a4.547,4.547,0,1,0,4.549-4.545h0a4.549,4.549,0,0,0-4.547,4.545m-30.99,51.074a20.943,20.943,0,0,1-7.037-1.3,12.547,12.547,0,0,1-7.193-7.19,20.923,20.923,0,0,1-1.3-7.037c-.184-3.994-.22-5.194-.22-15.313s.04-11.316.22-15.314a21.082,21.082,0,0,1,1.3-7.037,12.54,12.54,0,0,1,7.193-7.193,20.924,20.924,0,0,1,7.037-1.3c3.994-.184,5.194-.22,15.309-.22s11.316.039,15.314.221a21.082,21.082,0,0,1,7.037,1.3,12.541,12.541,0,0,1,7.193,7.193,20.926,20.926,0,0,1,1.3,7.037c.184,4,.22,5.194.22,15.314s-.037,11.316-.22,15.314a21.023,21.023,0,0,1-1.3,7.037,12.547,12.547,0,0,1-7.193,7.19,20.925,20.925,0,0,1-7.037,1.3c-3.994.184-5.194.22-15.314.22s-11.316-.037-15.309-.22m-.314-68.509a27.786,27.786,0,0,0-9.2,1.76,19.373,19.373,0,0,0-11.083,11.083,27.794,27.794,0,0,0-1.76,9.2c-.187,4.04-.229,5.332-.229,15.623s.043,11.582.229,15.623a27.793,27.793,0,0,0,1.76,9.2,19.374,19.374,0,0,0,11.083,11.083,27.813,27.813,0,0,0,9.2,1.76c4.042.184,5.332.229,15.623.229s11.582-.043,15.623-.229a27.8,27.8,0,0,0,9.2-1.76,19.374,19.374,0,0,0,11.083-11.083,27.716,27.716,0,0,0,1.76-9.2c.184-4.043.226-5.332.226-15.623s-.043-11.582-.226-15.623a27.786,27.786,0,0,0-1.76-9.2,19.379,19.379,0,0,0-11.08-11.083,27.748,27.748,0,0,0-9.2-1.76c-4.041-.185-5.332-.229-15.621-.229s-11.583.043-15.626.229" data-name="Path 18" transform="translate(-422.637 -426.196)"/></svg>
                </a> 
                <a id="copy_url" href="javascript:void(0)" onclick="copyLink()"> 
                <span id="copied" onclick="copyLink()"> url copied</span>
                <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24"><path d="M10,15H7c-1.7,0-3-1.3-3-3s1.3-3,3-3h3c0.6,0,1-0.4,1-1s-0.4-1-1-1H7c-2.8,0-5,2.2-5,5s2.2,5,5,5h3c0.6,0,1-0.4,1-1
                    S10.6,15,10,15z M17,7h-3c-0.6,0-1,0.4-1,1s0.4,1,1,1h3c1.7,0,3,1.3,3,3s-1.3,3-3,3h-3c-0.6,0-1,0.4-1,1s0.4,1,1,1h3
                    c2.8,0,5-2.2,5-5S19.8,7,17,7z M8,12c0,0.6,0.4,1,1,1h6c0.6,0,1-0.4,1-1s-0.4-1-1-1H9C8.4,11,8,11.4,8,12z"/></svg> </a> 
            </div>
        </div>   
   
    </div>
   
        <h1 class="pdp__content__title">{{ product.title }}</h1>
    
    {% unless product.has_only_default_variant %}
        <div class="pdp__content__size">{{ product.options_with_values[0].selected_value }}</div>
    {% endunless %}


    <div class="pdp__content__price">
        <div class="pdp__content__price__original">{% if current_variant.price <= 0 %}FREE{% else %}{{ current_variant.price | money}}{% endif %}</div>
        
        <div class="{% if current_variant.price <= 0 %}pdp__content__price__compare hide{% else %}pdp__content__price__compare{% endif %}">
            {% if current_variant.compare_at_price and current_variant.compare_at_price > current_variant.price %}
                {{ current_variant.compare_at_price | money}}
            {% endif %}
        </div>
    </div>


    {% unless product.has_only_default_variant %}
        <div class="pdp__content__swatches">
            {% for value in product.options_with_values[0].values %}
                <div 
                    data-option="{{ value }}"
                    {% if product.options_with_values[0].selected_value == value %}
                        class="pdp__content__swatches__item active"
                    {% else %}
                        class="pdp__content__swatches__item"
                    {% endif %}
                >{{ value }}</div>
            {% endfor %}
        </div>
    {% endunless %}

    <style>
        .custom-tabby {
            display: flex;
            justify-content: space-between;
            cursor: pointer;
            padding: 18px 0;
        }
            #TabbyPromo, #TabbyPromo2, .tabby-section {
              display:none;
            }
            #ct_payment_price {
            font-weight: 700;
        }
            .ct-content {
            font-size: 14px;
            color: #292929;
        }
          .ct-learn {
            display: flex;
            margin-top: 5px;
        }
          .ct-learn #infoImg {
            width: 17px;
            margin-right: 5px;
        }
        {% if shop.locale == 'en' %}

            {% else %}
          .ct-learn span {
            margin-right: 5px;
        } 
        .ct-learn #infoImg { margin-right:0px;}
        {% endif %}
          </style>
        <div class="custom-tabby">
          <div class="ct-content">
            <div class="ct-price">
                {% if shop.locale == 'en' %}
                <span id="ct_payments">or 4 interest-free payments of </span>
                {% else %}
                <span id="ct_payments">أو قسمها على 4 دفعات شهرية بقيمة</span>
                {% endif %}
                <span id="ct_payment_price"></span>
              </div>
            <div class="ct-learn">
                {% if shop.locale == 'en' %}
                    <img id="infoImg" src="{{ 'info-icon.png'| asset_url }}"><span>Learn more</span>
                    {% else %}
                    <img id="infoImg" src="{{ 'info-icon.png'| asset_url }}"><span>لمعرفة المزيد</span>
                    {% endif %}
            </div>
          </div>
          <div class="ct-icon">
            {% render 'icon-tabby' %}
          </div>
        </div>
    <div class="tabby-section">
    {% if product.variants.size <= 1 %}
        <div id="TabbyPromo1" class="tabbyProm" data-id="{{ product.selected_or_first_available_variant.id }}"></div>   
    {% else %}
        {% for variant in product.variants %}
            <div id="TabbyPromo{{ forloop.index }}" class="tabbyProm" data-id="{{ variant.id }}"></div>  
        {% endfor %}
    {% endif %}
    </div>

<div class="tamara-widget">
    {% render 'tamara' %}
</div>

    <div class="{% if current_variant.price <= 0 %}pdp__content__control hide{% else %}pdp__content__control{% endif %}">
        <div class="pdp__content__control__qty">
            <div class="pdp__content__control__qty__prev">
                <svg class="pdp__content__control__qty__next-icon" xmlns="http://www.w3.org/2000/svg" width="12.771" height="24.129" viewBox="0 0 12.771 24.129">
                    <path fill="none" stroke="#000" d="M-11902.357-18787.281l11.711 11.719-11.711 11.7" transform="translate(11902.711 18787.635)"/>
                </svg> 
            </div>
            <div class="pdp__content__control__qty__value">
                1
            </div>
            <div class="pdp__content__control__qty__next">
                <svg class="pdp__content__control__qty__prev-icon" xmlns="http://www.w3.org/2000/svg" width="12.771" height="24.129" viewBox="0 0 12.771 24.129">
                    <path fill="none" stroke="#000" d="M-11902.357-18787.281l11.711 11.719-11.711 11.7" transform="translate(-11889.939 -18763.506) rotate(180)"/>
                </svg>         
            </div>
        </div>

 
        {% if product.available %}
            <div 
                class="pdp__content__control__add-to-cart-btn"
                data-id="{{ current_variant.id }}"
            >
                <div class="pdp__content__control__add-to-cart-btn__label">Add to Cart</div>
                <div class="pdp__content__control__add-to-cart-btn__loading" style="display:none;">Loading...</div>
            </div>
            <div 
                style="display: none;"
                class="pdp__content__control__notify-me-btn"
                data-id="{{ current_variant.id }}"
            >Out of stock</div>
        {% else %}
            {% comment %} <div 
                style="display: none;"
                class="pdp__content__control__add-to-cart-btn"
                data-id="{{ current_variant.id }}"
            >Add to cart</div> {% endcomment %}
            <div 
                class="pdp__content__control__notify-me-btn"
                data-id="{{ current_variant.id }}"
            >Out of stock</div>
        {% endif %}
    </div>

    <div class="pdp__content__error">
        <div class="pdp__content__error__text">There was an errro adding product to the cart.</div>
    </div>

    {% render 'product-info-accordion' %}


</div>

<script type="application/id+json"> {{ product.variants | json }}</script>
<!-- tamara code js start -->

{% if request.locale.iso_code == 'ar' %} 
<script>
    function tamara_ar(){
        setTimeout(function () {
            let getPriceT = $('.pdp__content__price__original').text();

            //console.log(getPriceT); 

            var total_price_cart_t = getPriceT;
            total_price_cart_t = total_price_cart_t.replace("د.إ ", "");
            total_price_cart_t = total_price_cart_t.replace(/,/g, "");
            total_price_cart_t = parseInt(total_price_cart_t);
            //alert(myStr);

            let finalPrice2 = (total_price_cart_t / 3).toFixed(2);


            let getTamara = document.querySelector(".tamara-product-price");
            getTamara.textContent = 'د.إ ' + finalPrice2;
            // console.log("getTamara",getTamara);

            $('.tamara-popup__moto').text('قسم فاتورتك على 3 دفعات بقيمة د.إ ' + finalPrice2 + ' بدون فوائد');

        }, 1000);
  }
    tamara_ar();
    $('.tamara-product-widget, .pdp__content__swatches>div').on('click', function(){
        tamara_ar()
    });


</script>
{% else %}
<script>
    function tamara_en(){
        setTimeout(function () {
            let getPriceT = $('.pdp__content__price__original').text();

            //console.log(getPriceT);

            var total_price_cart_t = getPriceT;
            total_price_cart_t = total_price_cart_t.replace("AED ", "");
            total_price_cart_t = total_price_cart_t.replace(/,/g, "");
            total_price_cart_t = parseInt(total_price_cart_t);

            //console.log(total_price_cart_t);

            let finalPrice2 = (total_price_cart_t / 3).toFixed(2);

            let getTamara = document.querySelector(".tamara-product-price");
            getTamara.textContent = 'AED ' + finalPrice2;
            // console.log("getTamara",getTamara);

            $('.tamara-popup__moto').text('Split your bill into 3 payments of AED ' + finalPrice2 + ' interest-free');

        }, 1000);
}
    tamara_en()
    $('.tamara-product-widget, .pdp__content__swatches>div').on('click', function(){
        tamara_en()
    });

</script>

{% endif %}

<!-- tamara code js end -->

{% comment %}
  <script src="{{ 'tabby-promo.js' | asset_url }}"></script>
{% endcomment %}

<!-- tabby js file update -->

<script src="https://checkout.tabby.ai/tabby-promo.js"></script>



<script>
{% if product.variants.size <= 1 %}
  new TabbyPromo({
    selector: '#TabbyPromo1', // required, content of tabby Promo Snippet will be placed in element with that selector.
    currency: 'AED', // required, currency of your product. AED|SAR|KWD|BHD|EGP only supported, with NO spaces or lowercase.
    price: {{current_variant.price | money_without_currency | remove:','}}, // required, price or your product. 2 decimals max for AED|SAR|EGP and 3 decimals max for KWD|BHD supported.
    installmentsCount: 4, // Optional - custom installments number for tabby promo snippet (if not downpayment + 3 installments)
    source: 'product', // Optional, snippet placement; `product` for product page and `cart` for cart page
    publicKey: 'pk_50d38c61-f2ee-4a6a-b60e-b03002fdf3be', // required, public key which identifies your account when communicating with tabby. Test or Production depending on the environment
    merchantCode: 'sk_d5c968f4-168a-4442-9df1-747db3af8ad1'  // required
  });
{% else %}
  {% for variant in product.variants %}
      new TabbyPromo({
        selector: '#TabbyPromo{{ forloop.index }}', // required, content of tabby Promo Snippet will be placed in element with that selector.
        currency: 'AED', // required, currency of your product. AED|SAR|KWD|BHD|EGP only supported, with NO spaces or lowercase.
        price: {{ variant.price | money_without_currency | remove:',' }}, // required, price or your product. 2 decimals max for AED|SAR|EGP and 3 decimals max for KWD|BHD supported.
        installmentsCount: 4, // Optional - custom installments number for tabby promo snippet (if not downpayment + 3 installments)
        source: 'product', // Optional, snippet placement; `product` for product page and `cart` for cart page
        publicKey: 'pk_50d38c61-f2ee-4a6a-b60e-b03002fdf3be', // required, public key which identifies your account when communicating with tabby. Test or Production depending on the environment
        merchantCode: 'sk_d5c968f4-168a-4442-9df1-747db3af8ad1'  // required
      });
  {% endfor %} 
{% endif %} 

</script>

{% if request.locale.iso_code == 'ar' %}
<script>
    $(document).on("click",".styles__tabby-promo-wrapper--43068",function() {
        setTimeout(function () {
            let getPrice = $('.pdp__content__price__original').text();

            var total_price_cart = getPrice;
            total_price_cart = total_price_cart.replace(/,/g, "");
            total_price_cart = parseInt(total_price_cart);
            //alert(total_price_cart);
            total_price_cart = parseInt(total_price_cart);
            let finalPrice = (total_price_cart / 4).toFixed(2);
            // $('#TabbyPromo span b').text(' '); 
            //console.log('patel123', finalPrice);
            $('#TabbyPromo span strong, #TabbyPromo span b').text(' ');
            $('#TabbyPromo span strong, #TabbyPromo span b').text(finalPrice + ' د.إ');
        }, 600);
      })


    $('.product-form__controls-group, #TabbyPromo, .pdp__content__swatches div, .custom-tabby').on('click', function(){
        /*selecting tabby Element */
        let variantsData = JSON.parse('{{ product.variants | json }}');
        let currentSelectedOptionValue = Array.from($(".pdp__content__swatches .pdp__content__swatches__item.active")).map(el => el.dataset.option);
        let selectedVariant = currentSelectedOptionValue.length > 0 ? variantsData.find(el => el.options.length == currentSelectedOptionValue.length && el.options.every(el => currentSelectedOptionValue.indexOf(el) != -1)) : variantsData[0];
        /*selecting tabby Element */
        let tabyElement = Array.from(document.querySelector(`.tabbyProm[data-id='${selectedVariant.id}'] div div`)
        .shadowRoot.querySelectorAll("span")).filter(el => {
            let array = Array.from(el.classList).filter(el => el.includes("styles__tabby-promo-snippet__text"));
           if(array.length > 0) return el;  
        })[0];
           setTimeout(function () {


            let getPrice = $('.pdp__content__price__original').text();

            var total_price_cart = getPrice;
            total_price_cart = total_price_cart.replace("د.إ ", "");
            total_price_cart = total_price_cart.replace(/,/g, "");
            total_price_cart = parseInt(total_price_cart);
            //alert(myStr);

            let finalPrice = (total_price_cart / 4).toFixed(2);
            finalPrice = " " + finalPrice;
            // $('#TabbyPromo span b').text(' '); 
            // console.log('patel123');
            let shadowSelection = tabyElement;
            shadowSelection.firstChild.querySelector("strong").textContent = ' ';
            shadowSelection.firstChild.querySelector("strong").textContent = finalPrice + ' د.إ';
            shadowSelection.firstChild.querySelector("strong").style.marginLeft = "3px";
            // $('#TabbyPromo span strong, #TabbyPromo span b').text(' '); 
            // $('#TabbyPromo span strong, #TabbyPromo span b').text(finalPrice +' د.إ'); 

            document.getElementById("ct_payment_price").innerHTML = finalPrice + ' د.إ';



            $('.styles__title--38ade span').text('Split in 4 interest-free payments of ' + finalPrice + ' د.إ');


            $('.styles__tabby-promo__graph-with-titles--8a6da .styles__tabby-promo__graph-with-titles__item-text--bdcb7.styles__tabby-promo__graph-with-titles__item-text_big--b6da4 div:nth-child(1)').text(finalPrice + ' د.إ');
        }, 1000);
      });




    $(".custom-tabby").on("click",function(){
        let variantsData = JSON.parse('{{ product.variants | json }}');
        let currentSelectedOptionValue = Array.from($(".pdp__content__swatches .pdp__content__swatches__item.active")).map(el => el.dataset.option);
        let selectedVariant = currentSelectedOptionValue.length > 0 ? variantsData.find(el => el.options.length == currentSelectedOptionValue.length && el.options.every(el => currentSelectedOptionValue.indexOf(el) != -1)) : variantsData[0];
        /*selecting tabby Element */
        let tabyElement = Array.from(document.querySelector(`.tabbyProm[data-id='${selectedVariant.id}'] div div`)
        .shadowRoot.querySelectorAll("span")).filter(el => {
            let array = Array.from(el.classList).filter(el => el.includes("styles__tabby-promo-snippet__text"));
           if(array.length > 0) return el;  
        })[0]
        let shadowSelection = tabyElement;
    $(shadowSelection).trigger( "click" );
        });



</script>
{% else %}
<script>

    $(document).on("click",".styles__tabby-promo-wrapper--43068",function() {
        setTimeout(function () {
            let getPrice = $('.pdp__content__price__original').text();

            var total_price_cart = getPrice;
            total_price_cart = total_price_cart.replace(/,/g, "");
            total_price_cart = parseInt(total_price_cart);
            //alert(total_price_cart);
            total_price_cart = parseInt(total_price_cart);
            let finalPrice = (total_price_cart / 4).toFixed(2);
            // $('#TabbyPromo span b').text(' '); 
            //console.log('patel123', finalPrice);
            $('#TabbyPromo span strong, #TabbyPromo span b').text(' ');
            $('#TabbyPromo span strong, #TabbyPromo span b').text(finalPrice + ' AED');
        }, 600);
      })


    $('.product-form__controls-group, #TabbyPromo, .pdp__content__swatches div, .custom-tabby').on('click', function(){
        /*selecting tabby Element */
        let variantsData = JSON.parse('{{ product.variants | json }}');
        let currentSelectedOptionValue = Array.from($(".pdp__content__swatches .pdp__content__swatches__item.active")).map(el => el.dataset.option);
        let selectedVariant = currentSelectedOptionValue.length > 0 ? variantsData.find(el => el.options.length == currentSelectedOptionValue.length && el.options.every(el => currentSelectedOptionValue.indexOf(el) != -1)) : variantsData[0];
        /*selecting tabby Element */
        let tabyElement = Array.from(document.querySelector(`.tabbyProm[data-id='${selectedVariant.id}'] div div`)
        .shadowRoot.querySelectorAll("span")).filter(el => {
            let array = Array.from(el.classList).filter(el => el.includes("styles__tabby-promo-snippet__text"));
           if(array.length > 0) return el;  
        })[0]
        setTimeout(function () {


            let getPrice = $('.pdp__content__price__original').text();

            var total_price_cart = getPrice;
            total_price_cart = total_price_cart.replace("AED ", "");
            total_price_cart = total_price_cart.replace(/,/g, "");
            total_price_cart = parseInt(total_price_cart);
            //alert(myStr);

            let finalPrice = (total_price_cart / 4).toFixed(2);
            finalPrice = " " + finalPrice;
            // $('#TabbyPromo span b').text(' '); 
            // console.log('patel123');
            let shadowSelection = tabyElement;
            shadowSelection.firstChild.querySelector("strong").textContent = ' ';
            shadowSelection.firstChild.querySelector("strong").textContent = finalPrice + ' AED';
            shadowSelection.firstChild.querySelector("strong").style.marginLeft = "3px";
            // $('#TabbyPromo span strong, #TabbyPromo span b').text(' '); 
            // $('#TabbyPromo span strong, #TabbyPromo span b').text(finalPrice +' AED'); 

            document.getElementById("ct_payment_price").innerHTML = finalPrice + ' AED';


            $('.styles__title--38ade span').text('Split in 4 interest-free payments of ' + finalPrice + ' AED');




            $('.styles__tabby-promo__graph-with-titles--8a6da .styles__tabby-promo__graph-with-titles__item-text--bdcb7.styles__tabby-promo__graph-with-titles__item-text_big--b6da4 div:nth-child(1)').text(finalPrice + ' AED');
        }, 1000);
      });

    $(".custom-tabby").on("click",function(){
        let variantsData = JSON.parse('{{ product.variants | json }}');
        let currentSelectedOptionValue = Array.from($(".pdp__content__swatches .pdp__content__swatches__item.active")).map(el => el.dataset.option);
        let selectedVariant = currentSelectedOptionValue.length > 0 ? variantsData.find(el => el.options.length == currentSelectedOptionValue.length && el.options.every(el => currentSelectedOptionValue.indexOf(el) != -1)) : variantsData[0];
        /*selecting tabby Element */
        let tabyElement = Array.from(document.querySelector(`.tabbyProm[data-id='${selectedVariant.id}'] div div`)
        .shadowRoot.querySelectorAll("span")).filter(el => {
            let array = Array.from(el.classList).filter(el => el.includes("styles__tabby-promo-snippet__text"));
           if(array.length > 0) return el;  
        })[0]
        let shadowSelection = tabyElement;
    $(shadowSelection).trigger( "click" );
        });



</script>

{% endif %}
<style>

  .styles__tabby-promo-snippet--54518.styles__tabby-promo-snippet_font_inherit--b7b35 { background:#f00}
span.styles__tabby-promo-snippet__text--f30af {
    display: flex !important;
    flex-direction: column !important;
}
</style>
<script>
    function copyLink() {
        window.navigator.clipboard.writeText(window.location.href);
        let copied = document.getElementById("copied").style.display="block";
        setTimeout(function(){	
            document.getElementById("copied").style.display="none"
        },1000);
      }
</script>